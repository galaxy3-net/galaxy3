#!/usr/bin/env bash
set -x


function state () {
  # echo "Checking the state" >&2
  echo $(vagrant status --machine-readable | egrep 'default,state' | awk -F, '{print $4}')
}

function up () {
  echo "Starting up ${boxname} $(state)"
  if [ "$(state)" == "up" ]
  then
    echo "${boxname} is already running"
    exit
  fi
  vagrant ${*}
}

export boxname=$(basename ${0})
echo " - - ${boxname} ${*} - -"

cd ${HOME}/galaxy3/vagrant/${boxname}

case "${1}" in

  "up")  up
         ;;

   *)  echo "usage" ; exit 1
       ;;
esac

