#!/usr/bin/env bash
#set -x


function state () {
  # echo "Checking the state" >&2
  echo $(vagrant status --machine-readable | egrep 'default,state' | grep -v "human" | awk -F, '{print $4}')
}

function up () {

  case "$(state)" in

    "running")
      printf "\n\t${boxname} is already running\n\n"

      # vagrant ${*}

    *) echo "stats is $(state)"
      exit 1
      ;;
  esac
  return
}

function halt () {
  case "$(state)" in

    "running")  vagrant ${*}
      ;;

    *) echo "${boxname} is not running"
       ;;
  esac
  return
}

export boxname=$(basename ${0})
echo " - - ${boxname} ${*} - -"

cd ${HOME}/galaxy3/vagrant/${boxname}

vagrant status --machine-readable | egrep 'default,state'
case "${1}" in

  "up")  up ${*} --provision
    ;;

  "halt")  halt ${*}
    ;;

  "status") vagrant status
    ;;

   *)  echo "usage" ; exit 1
       ;;
esac

